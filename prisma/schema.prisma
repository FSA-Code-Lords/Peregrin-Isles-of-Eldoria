// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Item {
  id          Int        @id @default(autoincrement())
  name        String     @unique @db.VarChar(20)
  description String     @db.Text
  locations   Location[]
}

model Quest {
  id          Int        @id @default(autoincrement())
  name        String     @unique @db.VarChar(20)
  description String     @db.Text
  isCompleted Boolean    @default(false) @db.Boolean
  locations   Location[]
}

model Choice {
  id              Int        @id @default(autoincrement())
  name            String     @unique @db.VarChar(20)
  action          String     @db.Text
  result          String     @db.Text
  locations       Location[]
  choices         Choice[]   @relation("choices")
  choicesRelation Choice[]   @relation("choices") // used to store many choices to many choices
}

model Monster {
  id       Int        @id @default(autoincrement())
  name     String     @unique @db.VarChar(20)
  hp       Int
  atk      Int
  dodge    Int
  location Location[]
}

model Location {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(20)
  description String    @db.Text
  monsters    Monster[]
  choices     Choice[]
  quests      Quest[]
  items       Item[]
}

model Class {
  id          Int    @id @default(autoincrement())
  name        String @unique @db.VarChar(20)
  description String @db.Text
  hpChange    Int
  atkChange   Int
  dodgeChange Int
}

model Race {
  id          Int    @id @default(autoincrement())
  name        String @unique @db.VarChar(20)
  description String @db.Text
  hpChange    Int
  atkChange   Int
  dodgeChange Int
}

model Save_Data {
  id     Int  @id @default(autoincrement())
  userId Int
  user   User @relation(fields: [userId], references: [id])
}

model User {
  id        Int         @id @default(autoincrement())
  username  String      @unique @db.VarChar(20)
  password  String      @db.VarChar(20)
  isAdmin   Boolean     @default(false) @db.Boolean
  isBanned  Boolean     @default(false) @db.Boolean
  Save_Data Save_Data[]
}
